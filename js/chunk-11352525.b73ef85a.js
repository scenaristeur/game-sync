(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-11352525"],{"0999":function(t,n,e){"use strict";e("32bd")},2532:function(t,n,e){"use strict";var i=e("23e7"),r=e("5a34"),o=e("1d80"),a=e("577e"),s=e("ab13");i({target:"String",proto:!0,forced:!s("includes")},{includes:function(t){return!!~a(o(this)).indexOf(a(r(t)),arguments.length>1?arguments[1]:void 0)}})},"32bd":function(t,n,e){},"9dbd":function(t,n,e){"use strict";e.r(n);var i=function(){var t=this,n=t.$createElement,e=t._self._c||n;return null!=t.wikiEntry&&t.numberShown>0?e("b-list-group-item",[e("b-card",{attrs:{"no-body":""}},[e("b-tabs",{attrs:{pills:"",card:"",vertical:t.vertical}},[e("b-button",{attrs:{size:"sm",variant:"outline-primary",title:"alignement"},on:{click:t.toggleVertical}},[1==t.vertical?e("b-icon",{attrs:{icon:"align-start"}}):e("b-icon",{attrs:{icon:"align-top"}})],1),t._l(t.wikiEntry.things,(function(n){return e("div",{key:n.id},[n.show&&"https://www.w3.org/ns/activitystreams#Note"==n.type?e("b-tab",{attrs:{title:n.name}},[e("h5",[t._v(t._s(n.name)+" "),e("b-button",{attrs:{size:"sm",variant:"outline-primary"},on:{click:function(e){return t.edit(n.id)}}},[e("b-icon-pen")],1)],1),t.editing_id==n.id?e("div",[e("b-form-textarea",{ref:"textarea_"+n.id,refInFor:!0,attrs:{id:"textarea_"+n.id,placeholder:"Enter something...",rows:"3","max-rows":"6",autofucus:""},on:{change:t.contentChanged,blur:function(n){t.editing_id=null}},model:{value:n.content,callback:function(e){t.$set(n,"content",e)},expression:"t.content"}})],1):t._e(),e("pre",{domProps:{innerHTML:t._s(n.content)},on:{click:function(e){return t.edit(n.id)}}}),e("b-button",{attrs:{size:"sm",variant:"outline-primary",title:"mentionner"},on:{click:function(e){return t.mentionner(n)}}},[t._v("@")]),e("Relations",{attrs:{relations:n.relations}}),e("a",{attrs:{href:n.url,target:"_blank"}},[t._v("data")])],1):t._e()],1)})),e("b-tab",{attrs:{title:"+"}},[e("b-card-text",[e("b-input",{attrs:{placeholder:"name"},on:{change:t.addNote},model:{value:t.newnote.name,callback:function(n){t.$set(t.newnote,"name",n)},expression:"newnote.name"}})],1)],1)],2)],1)],1):t._e()},r=[],o=e("b85c"),a=e("1da1"),s=(e("96cf"),e("d3b7"),e("3ca3"),e("ddb0"),e("caad"),e("2532"),e("b0c0"),e("ec26")),c={name:"WikiEntry",props:["url"],components:{Relations:function(){return e.e("chunk-2d0c4673").then(e.bind(null,"3b4b"))}},data:function(){return{wikiEntry:null,newnote:{},last:"",vertical:!1,numberShown:0,editing_id:""}},created:function(){this.init()},methods:{addNote:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return console.log(t.wikiEntry),console.log(t.wikiEntry.things),console.log("new note",t.newnote),t.newnote.id=Object(s["a"])(),t.newnote.url=t.wikiEntry.url+"#"+t.newnote.id,t.newnote.path=t.wikiEntry.path,n.next=8,t.$store.dispatch("wiki/add",t.newnote);case 8:t.last=t.newnote.id,t.newnote={},t.init();case 11:case"end":return n.stop()}}),n)})))()},init:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.$readWikiEntry(t.url);case 2:t.wikiEntry=n.sent,null!=t.wikiEntry&&t.wikiEntry.things.length>0&&(t.updateShow(),t.$store.commit("wiki/updateIndex",t.wikiEntry));case 4:case"end":return n.stop()}}),n)})))()},contentChanged:function(){console.log(this.wikiEntry),this.$store.dispatch("wiki/update",this.wikiEntry)},toggleVertical:function(){this.vertical=!this.vertical,console.log("vertical",this.vertical)},updateShow:function(){if(this.numberShown=0,null!=this.wikiEntry&&this.wikiEntry.things.length>0){var t,n=Object(o["a"])(this.wikiEntry.things);try{for(n.s();!(t=n.n()).done;){var e=t.value;e.name.includes(this.searchQuery)?(e.show=!0,this.numberShown++):e.show=!1}}catch(i){n.e(i)}finally{n.f()}}0==this.searchQuery.length&&(this.numberShown=this.wikiEntry.things.length)},edit:function(t){console.log(t),this.editing_id=this.editing_id!=t?t:null},mentionner:function(t){console.log("mentionner"),void 0==t.actors&&(t.actors=[]),void 0==t.actions&&(t.actions=[]),void 0==t.objects&&(t.objects=[]),void 0==t.contexts&&(t.contexts=[]),this.$store.commit("wiki/setMentionTarget",t),this.$bvModal.show("modal-mention-selector")}},watch:{url:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.init();case 1:case"end":return n.stop()}}),n)})))()},searchQuery:function(){this.updateShow()}},computed:{searchQuery:{get:function(){return this.$store.state.wiki.searchQuery},set:function(){}}}},u=c,l=(e("0999"),e("2877")),d=Object(l["a"])(u,i,r,!1,null,null,null);n["default"]=d.exports},caad:function(t,n,e){"use strict";var i=e("23e7"),r=e("4d64").includes,o=e("44d2");i({target:"Array",proto:!0},{includes:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),o("includes")}}]);
//# sourceMappingURL=chunk-11352525.b73ef85a.js.map